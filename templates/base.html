<!-- Header Part -->
{% load static %}

{% load pipeline %}


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Blog{% endblock %}</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="{{ request.build_absolute_uri }}">
  {% if page_obj.has_previous %}
    <link rel="prev" href="?page={{ page_obj.previous_page_number }}">
  {% endif %}
  {% if page_obj.has_next %}
    <link rel="next" href="?page={{ page_obj.next_page_number }}">
  {% endif %}

 <!-- Dynamic Meta Tags -->
  <meta name="description" content="{% block meta_description %}{{ site_settings.meta_description|default:'Latest tech, news, and blog articles.' }}{% endblock %}">
  <meta name="keywords" content="{% block meta_keywords %}{{ site_settings.meta_keywords|default:'news, business, sports, entertainment' }}{% endblock %}">
  <meta name="author" content="{{ site_settings.meta_author|default:'Your Site Name' }}">
  <meta name="robots" content="{% block meta_robots %}index, follow{% endblock %}">
  

  <meta property="og:title" content="{% block og_title %}{{ site_settings.site_name|default:'My Blog Site' }}{% endblock %}">
  <meta property="og:description" content="{% block og_description %}{{ site_settings.meta_description|default:'Latest blog updates' }}{% endblock %}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  <meta property="og:image" content="{% block og_image %}{{ site_settings.site_logo.url|default:'' }}{% endblock %}">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% block twitter_title %}{{ site_settings.site_name|default:'My Blog Site' }}{% endblock %}">
  <meta name="twitter:description" content="{% block twitter_description %}{{ site_settings.meta_description|default:'Latest blog updates' }}{% endblock %}">
  <meta name="twitter:image" content="{% block twitter_image %}{{ site_settings.site_logo.url|default:'' }}{% endblock %}">


  <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
  
  <!-- Core Styles -->
  <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  {% stylesheet 'main' %}
  {% javascript 'main' %}
  <!-- Page-specific Styles (login, signup) -->
  {% block head %}{% endblock %}
</head>

<body class="{% if request.COOKIES.theme == 'dark' %}dark-mode{% else %}light-mode{% endif %}">
    {% if messages %}
        <div class="container mt-2">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Navbar -->
    
    <nav class="navbar">
        <div class="navbar-container">
            <!-- Left: Logo -->
            <div class="navbar-left">
            <a href="/" class="navbar-brand">Blog</a>
            </div>

            <!-- Middle: Categories (desktop only) -->
            <div class="category-links desktop-only">
            {% for cat in categories %}
                <a href="{% url 'posts_by_category' cat.slug %}" class="category-link">{{ cat.category_name }}</a>
            {% endfor %}
            </div>

            <!-- Right: Auth links (desktop) + Toggle (mobile) -->
            <div class="navbar-right">
            <!-- Auth links (desktop only) -->
            <div class="auth-links desktop-only">
                {% if not user.is_authenticated %}
                <a href="{% url 'account_login' %}" class="nav-link">Login</a>
                <a href="{% url 'account_signup' %}" class="nav-link">Register</a>
                {% else %}
                {% if user.is_staff or user.is_superuser %}
                    <a href="{% url 'dashboard' %}" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg></a>
                {% endif %}
                <a href="{% url 'account_logout' %}" class="nav-link">Logout</a>
                {% endif %}
            </div>

            <!-- Search (desktop only) -->
            <form action="{% url 'search' %}" method="GET" class="search-form desktop-only">
                {% csrf_token %}
                <input type="text" name="keyword" value="{{ keyword }}" placeholder="Search..." />
                <button type="submit">Go</button>
            </form>

            <!-- ‚ò∞ toggle -->
            <button class="navbar-toggle" id="navbar-toggle">
                <span id="navbar-icon">&#9776;</span>
            </button>
            </div>
        </div>

        <!-- Mobile Dropdown Overlay -->
        <div class="navbar-overlay" id="navbar-overlay">
            <form action="{% url 'search' %}" method="GET" class="search-form mobile-only">
                {% csrf_token %}
                <input type="text" name="keyword" value="{{ keyword }}" placeholder="Search..." />
                <button type="submit" class="nav-search-button">üîç</button>
            </form>
            {% if not user.is_authenticated %}
            <a href="{% url 'account_login' %}" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"/></svg> Login</a>
            <a href="{% url 'account_signup' %}" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M80-160v-112q0-33 17-62t47-44q51-26 115-44t141-18q30 0 58.5 3t55.5 9l-70 70q-11-2-21.5-2H400q-71 0-127.5 17T180-306q-9 5-14.5 14t-5.5 20v32h250l80 80H80Zm542 16L484-282l56-56 82 82 202-202 56 56-258 258ZM400-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm10 240Zm-10-320q33 0 56.5-23.5T480-640q0-33-23.5-56.5T400-720q-33 0-56.5 23.5T320-640q0 33 23.5 56.5T400-560Zm0-80Z"/></svg> Register</a>
            {% else %}
            {% if user.is_staff or user.is_superuser %}
                <a href="{% url 'dashboard' %}" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg> Dashboard</a>
            {% endif %}
            <a href="{% url 'account_logout' %}" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/></svg> Logout</a>
            {% endif %}

            {% for cat in categories %}
            <a href="{% url 'posts_by_category' cat.slug %}" class="category-link">{{ cat.category_name }}</a>
            {% endfor %}
        </div>
    </nav>





<!-- Navbar End -->


<!-- Main Content Part -->
{% block content %}

{% endblock %}



<!-- Footer Part -->
    <footer class="footer">
        <div class="footer-container">
        <!-- About Column -->
        <div class="footer-column">
        <h5>About</h5>
        <p>Trusted source for news, articles, and trending updates around the world.</p>
        </div>

        <!-- Sections Column -->
        <div class="footer-column">
        <h5>Sections</h5>
        <ul>
            {% for category in categories %}
            <li>
                <a href="{% url 'posts_by_category' category.slug %}">
                <i class="fa fa-folder"></i> {{ category.category_name }}
                </a>
            </li>
            {% endfor %}
        </ul>
        </div>

        <!-- Social Links Column -->
            <div class="footer-column">
            {% if social_links %}
                <h5>Follow Us</h5>
                <ul class="social-links">
                {% for i in social_links %}
                    <li>
                    <a href="{{ i.link }}" target="_blank">
                        {% if "facebook" in i.platform|lower %}
                        <i class="fab fa-facebook"></i>
                        {% elif "twitter" in i.platform|lower %}
                        <i class="fab fa-twitter"></i>
                        {% elif "instagram" in i.platform|lower %}
                        <i class="fab fa-instagram"></i>
                        {% elif "youtube" in i.platform|lower %}
                        <i class="fab fa-youtube"></i>
                        {% else %}
                        <i class="fas fa-link"></i>
                        {% endif %}
                        {{ i.platform }}
                    </a>
                    </li>
                {% endfor %}
                </ul>
            {% endif %}
            </div>
        </div>

        <div class="footer-links">
            <a href="{% url 'page_detail' slug='about-us' %}">About Us</a>
            <a href="{% url 'page_detail' slug='cookies' %}">Cookies</a>
            <a href="{% url 'page_detail' slug='privacy-policy' %}">Privacy Policy</a>
            <a href="{% url 'page_detail' slug='terms-of-use' %}">Terms of Use</a>
            <a href="{% url 'page_detail' slug='contact-us' %}">Contact Us</a>
        </div>

        <div class="footer-bottom">
            <p>Blog built with ‚ù§Ô∏è by <a href="#">Bidex Media Communication</a></p>
            <p>&copy; {{ now|date:"Y" }} Blog. All rights reserved.</p>
            <button id="theme-toggle">üåô</button>
        </div>
    </footer>



    <script>
        const toggleBtn = document.getElementById('navbar-toggle');
        const overlay = document.getElementById('navbar-overlay');
        const icon = document.getElementById('navbar-icon');

        toggleBtn.addEventListener('click', () => {
            overlay.classList.toggle('show');
            icon.innerHTML = overlay.classList.contains('show') ? '&times;' : '&#9776;';
        });
    </script>

    {% if not request.COOKIES.cookie_consent %}
    <div id="cookie-banner" style="background:#eee;padding:10px;position:fixed;bottom:0;width:100%;">
    <p>This site uses cookies to enhance your experience. <a href="#">Learn more</a></p>
    <button onclick="acceptCookies()">Accept</button>
    </div>
    <script>
        function acceptCookies() {
            document.cookie = "cookie_consent=true;path=/;max-age=" + 60 * 60 * 24 * 365;
            document.getElementById("cookie-banner").style.display = "none";
        }
        function setTheme(theme) {
            document.cookie = "theme=" + theme + ";path=/;max-age=" + (60*60*24*365);
            location.reload();  // Or use class toggle for instant change without reload
        }
    </script>
    {% endif %}

    {% block jsonld %}{% endblock %}


</body>
</html>